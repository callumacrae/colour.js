var color = {};color.parse = function (color) {"use strict";var info;if (typeof color !== 'string') {throw Error('color must be a string.');}if (info = /rgb\(([0-9]{1,3}), ?([0-9]{1,3}), ?([0-9]{1,3})\)/i.exec(color)) {return [parseInt(info[1], 10),parseInt(info[2], 10),parseInt(info[3], 10)];} else if (color.slice(0, 1) === '#') {if (color.length === 4) {return [parseInt(color.slice(1, 2), 16) * 17,parseInt(color.slice(2, 3), 16) * 17,parseInt(color.slice(3, 4), 16) * 17];}return [parseInt(color.slice(1, 3), 16),parseInt(color.slice(3, 5), 16),parseInt(color.slice(5, 7), 16)];} else {throw Error('color not recognised.');}};color.aryToString = function (c) {"use strict";if (!Array.isArray(c)) {throw Error('color must be an array.');}c = 'rgb(' + c.join(',') + ')';try {color.parse(c)} catch (err) {throw Error('Invalid array.');}return c;};color.add = function () {"use strict";var endcolor = [0, 0, 0], i, tmpcolor;for (i = 0; i < arguments.length; i++) {if (typeof arguments[i] !== 'string') {throw Error('colors must be strings.');}tmpcolor = color.parse(arguments[i]);endcolor[0] += tmpcolor[0];endcolor[1] += tmpcolor[1];endcolor[2] += tmpcolor[2];}endcolor.forEach(function (c, i) {if (c > 255) {endcolor[i] = 255;}});return color.aryToString(endcolor);};color.multiply = function (c, i) {"use strict";c = color.parse(c);if (typeof i !== 'number') {throw Error('Must be a number');}c.forEach(function (d, j) {c[j] = Math.round((d * i > 255) ? 255 : d * i);});return color.aryToString(c);};color.divide = function (c, i) {"use strict";return color.multiply(c, 1 / i);};color.average = function () {"use strict";for (var i = 0; i < arguments.length; i++) {arguments[i] = color.divide(arguments[i], arguments.length);}return color.add.apply(null, arguments);};
